# Product Backlog

## Authentication & Access Control
- **Local-storage auth gates can be spoofed** – The primary auth guard and role gates only look at `localStorage` flags and never verify the current Supabase session or JWT role claims (`client/App.tsx:111`, `client/components/AuthGate.tsx:8-13`, `client/components/RoleGate.tsx:6-21`, `client/components/site/Header.tsx:19-61`). A malicious user can flip those keys and reach protected routes even if Supabase would reject subsequent data calls. Build a centralized session/role provider backed by `supabase.auth.getSession`, persist refresh tokens securely, and gate routes/UI based on server-trusted claims instead of client storage.

## Admin Operations
- **Admin submissions/companies/seekers live only in browser storage** – All admin review pages (`client/pages/AdminCompanies.tsx:9-50`, `client/pages/AdminSeekers.tsx:7-47`, `client/pages/AdminEditJob.tsx:9-137`) depend on helper libs that seed demo data into `localStorage` (`client/lib/admin.ts:27-104`, `client/lib/adminCompanies.ts:19-72`, `client/lib/adminSeekers.ts:17-78`). Nothing ever touches Supabase tables, so real job submissions/companies from `opportunities`, `company_profiles`, etc. are invisible to admins and any edits never reach the database. Replace these mocks with Supabase queries (or RPCs) so moderation and editing operate on real data, and remove the conflicting browser cache.
- **Admin edit form cannot update real jobs** – `AdminEditJob` reads/writes through the same `adminUpsertSubmission` local mock (`client/pages/AdminEditJob.tsx:36-137`), so administrators cannot actually edit Supabase `opportunities`. Implement an admin-only API (or Supabase RPC) to patch opportunities/history instead of mutating a browser list, and wire the form to it.

## Support & Communications
- **Support tickets are purely client-side** – The product plan calls for cross-role ticketing (`server/SUPABASE_BACKEND_PLAN.md:11,97`), but there is no `tickets` table in `server/supabase/schema.sql`, and the UI simply seeds/reads localStorage (`client/lib/tickets.ts:25-110`, `client/pages/AdminTickets.tsx:22-118`, `client/components/TicketModal.tsx:1-120`). This means tickets disappear per device and admins cannot collaborate. Add a proper `tickets` table + RLS, CRUD endpoints (or Supabase queries), and update the modal/admin screens to read/write the backend.
- **Chat attachments never upload** – Company chat senders build attachment objects with `URL.createObjectURL` and a TODO comment (`client/pages/CompanyChatWindow.tsx:100-146`), so files disappear once the browser closes and cannot be viewed by other participants. Implement Supabase Storage uploads (per chat bucket), store metadata/URLs in `messages.attachments`, and add download rendering across all chat windows.
- **Evie assistant reads mock data** – The assistant still uses the `listProjects` static seed and fake sinks (`client/components/site/EvieAssistant.tsx:130-335`, `client/lib/projects.ts:75-145`), so suggested projects, FAQs about requirements, and "post an opportunity" actions do not reflect live opportunities or company defaults. Replace the helper functions with Supabase-backed search (reuse `fetchActiveOpportunities` and `company_requirements`), hook the CTA into the actual workflow, and remove the prototype data set.

## Marketing, Onboarding & Growth
- **Static pages are placeholders** – Most marketing destinations (`/students`, `/companies`, `/educators`, regional pages, blog, etc.) just render `PlaceholderPage` with lorem text (`client/pages/StaticPages.tsx:319-536`). The "Post an Opportunity" form inside that file only toasts and logs values (`client/pages/StaticPages.tsx:73-88`). Either build the promised content/workflows or hide these routes until real copy/components are ready.
- **Company email verification is simulated** – The verification modal simply `alert`s a fake OTP and toggles a local boolean (`client/pages/CompanyProfileCreate.tsx:73-115`), so the `email_verified` flag can be set without proof and nothing is stored server-side. Integrate a transactional email/OTP service and update the profile rows upon successful verification.
- **Lead capture endpoint is a sink** – After applying, users can "track" an opportunity, but the client just POSTs to `/api/interested-leads` (`client/pages/ApplyThankYou.tsx:26-55`), and the Express handler only logs and returns 201 without persistence (`server/index.ts:36-44`). Persist these leads (Supabase table or CRM webhook) and expose them in an admin view.
- **Paid stipend tiers remain "coming soon"** – Company posting/edit flows disable anything except "No pay" (`client/pages/PostOpportunity.tsx:229-237`, `client/pages/CompanyEditJob.tsx:247-255`, `client/pages/StaticPages.tsx:268-283`). If paid tiers are part of the offering, wire the selects to real enum values, extend the schema if needed, and surface stipend data in seeker views.

## Analytics & Reporting
- **Admin analytics dashboard is hard-coded** – The analytics screen renders static numbers (`client/pages/AdminAnalytics.tsx:5-41`) despite the backend plan calling for DAU, conversion, and top job metrics. Instrument key events (e.g., page views, applications) into Supabase (or an analytics warehouse), build materialized views/RPCs, and populate this UI with real-time data plus date-range filtering.

## Miscellaneous Backend Gaps
- **Express APIs are still prototypes** – Several endpoints simply log and return success (`server/index.ts:28-45`), and `/api/auth/*` is unused because the React app talks to Supabase directly. Decide whether to expose a real REST layer (wrapping Supabase service-role logic) or delete the dead routes. If keeping them, they must validate payloads, persist to Supabase, and return meaningful responses.
